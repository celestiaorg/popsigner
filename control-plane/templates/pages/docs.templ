package pages

import "github.com/Bidon15/popsigner/control-plane/templates/layouts"

// DocsPageData contains the data for the docs page.
type DocsPageData struct {
	UserName      string
	UserEmail     string
	AvatarURL     string
	OrgName       string
	OrgPlan       string
	ActiveSection string
	ActiveTab     string // "build" or "operate"
}

// DocsPage renders documentation with Bloomberg terminal aesthetic.
templ DocsPage(data DocsPageData) {
	@layouts.Base("Documentation - POPSigner", false, true) {
		<div class="min-h-screen bg-[#0a0a0a] font-mono relative">
			<!-- Scanlines -->
			<div class="fixed inset-0 pointer-events-none opacity-20
			            bg-[repeating-linear-gradient(0deg,transparent,transparent_2px,rgba(0,0,0,0.3)_2px,rgba(0,0,0,0.3)_4px)]"></div>
			
			<!-- Phosphor glow -->
			<div class="fixed inset-0 overflow-hidden pointer-events-none">
				<div class="absolute top-0 left-1/2 -translate-x-1/2 w-[1200px] h-[600px] 
				            bg-[radial-gradient(ellipse_at_center,rgba(255,176,0,0.08)_0%,transparent_60%)] 
				            blur-2xl"></div>
			</div>
			
			<!-- Vignette -->
			<div class="fixed inset-0 pointer-events-none 
			            bg-[radial-gradient(ellipse_at_center,transparent_40%,rgba(0,0,0,0.5)_100%)]"></div>

			<!-- Header -->
			<header class="sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-[#333300]">
				<div class="max-w-5xl mx-auto px-6 py-4 flex items-center justify-between">
					<a href="/" class="flex items-center gap-2 group">
						<span class="text-[#FFB000] text-xl">â—‡</span>
						<span class="text-[#FFB000] font-bold uppercase tracking-wider
						            group-hover:drop-shadow-[0_0_10px_#FFB000] transition-all">
							POPSigner
						</span>
					</a>
					<div class="flex items-center gap-6">
						<a href="/keys" class="text-sm text-[#33FF00] uppercase hover:drop-shadow-[0_0_5px_#33FF00] transition-all">Dashboard</a>
						<a href="https://github.com/Bidon15/popsigner" target="_blank" rel="noopener" 
						   class="text-sm text-[#33FF00] uppercase hover:drop-shadow-[0_0_5px_#33FF00] transition-all">
							GitHub â†—
						</a>
					</div>
				</div>
			</header>

			<!-- Content -->
			<div class="relative z-10 max-w-5xl mx-auto px-6 py-12" x-data="{ mainTab: 'build' }">
				<!-- Hero -->
				<div class="mb-8">
					<div class="text-[#33FF00] text-sm mb-4 opacity-70">
						<span class="text-[#228B22]">&gt;</span> cat README.md
					</div>
					<h1 class="text-3xl sm:text-4xl text-[#FFB000] font-bold uppercase tracking-wider mb-4
					           drop-shadow-[0_0_15px_#FFB000]">
						POPSIGNER DOCUMENTATION
					</h1>
					<p class="text-lg text-[#33FF00] opacity-90 max-w-2xl uppercase">
						POINT-OF-PRESENCE SIGNING INFRASTRUCTURE. KEYS REMAIN REMOTE. YOU REMAIN SOVEREIGN.
					</p>
				</div>

				<!-- Main Navigation Tabs -->
				<div class="mb-12 flex gap-2 p-1 bg-black border border-[#333300]">
					<button @click="mainTab = 'build'" 
							:class="mainTab === 'build' ? 'bg-[#33FF00] text-black' : 'bg-black text-[#888888] hover:text-[#33FF00]'"
							class="flex-1 px-6 py-3 text-sm font-bold uppercase transition-all flex items-center justify-center gap-2">
						<span>ğŸ”§</span> BUILD
					</button>
					<button @click="mainTab = 'operate'" 
							:class="mainTab === 'operate' ? 'bg-[#33FF00] text-black' : 'bg-black text-[#888888] hover:text-[#33FF00]'"
							class="flex-1 px-6 py-3 text-sm font-bold uppercase transition-all flex items-center justify-center gap-2">
						<span>âš™ï¸</span> OPERATE
					</button>
				</div>

				<!-- BUILD TAB CONTENT -->
				<div x-show="mainTab === 'build'" x-cloak>
				
				<!-- Quickstart -->
				<section class="mb-16">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; QUICKSTART_
					</h2>
					<div class="grid md:grid-cols-3 gap-4">
						@docsStepCard("01", "CREATE API KEY", "Settings â†’ API Keys")
						@docsStepCard("02", "CREATE SIGNING KEY", "Keys â†’ Create Key")
						@docsStepCard("03", "INTEGRATE", "Use SDK below")
					</div>
				</section>

				<!-- Celestia Integration -->
				<section class="mb-16" x-data="{ tab: 'go' }">
					<div class="flex items-center gap-3 mb-6">
						<span class="text-2xl">ğŸŒŒ</span>
						<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider
						           drop-shadow-[0_0_8px_#FFB000]">
							CELESTIA INTEGRATION
						</h2>
					</div>
					
					<p class="text-[#33FF00] opacity-80 mb-6 uppercase text-sm">
						Drop-in keyring for the 
						<a href="https://github.com/celestiaorg/celestia-node" target="_blank" 
						   class="text-[#FFB000] hover:drop-shadow-[0_0_5px_#FFB000] transition-all">
							Celestia Node client
						</a>.
					</p>

					<!-- Terminal Tabs -->
					<div class="flex gap-1 mb-6 p-1 bg-black border border-[#333300] inline-flex">
						<button @click="tab = 'go'" 
								:class="tab === 'go' ? 'bg-[#FFB000] text-black' : 'text-[#666600] hover:text-[#FFB000]'"
								class="px-4 py-2 text-sm font-bold uppercase transition-all">
							[ GO ]
						</button>
						<button @click="tab = 'rust'" 
								:class="tab === 'rust' ? 'bg-[#FFB000] text-black' : 'text-[#666600] hover:text-[#FFB000]'"
								class="px-4 py-2 text-sm font-bold uppercase transition-all">
							[ RUST ]
						</button>
						<button @click="tab = 'curl'" 
								:class="tab === 'curl' ? 'bg-[#FFB000] text-black' : 'text-[#666600] hover:text-[#FFB000]'"
								class="px-4 py-2 text-sm font-bold uppercase transition-all">
							[ cURL ]
						</button>
					</div>

					<!-- Go Tab -->
					<div x-show="tab === 'go'" x-cloak>
						<p class="text-xs text-[#666600] uppercase mb-2">&gt; INSTALL:</p>
						@docsCodeBlock("go get github.com/Bidon15/popsigner/sdk-go")
						
						<p class="text-xs text-[#666600] uppercase mt-6 mb-2">&gt; COMPLETE EXAMPLE:</p>
						@docsCodeBlockMulti(goExample())
					</div>

					<!-- Rust Tab -->
					<div x-show="tab === 'rust'" x-cloak>
						<p class="text-xs text-[#666600] uppercase mb-2">&gt; ADD TO CARGO.TOML:</p>
						@docsCodeBlock(`[dependencies]
popsigner = { version = "0.1", features = ["celestia"] }
tokio = { version = "1", features = ["full"] }`)
						
						<p class="text-xs text-[#666600] uppercase mt-6 mb-2">&gt; COMPLETE EXAMPLE:</p>
						@docsCodeBlockMulti(rustExample())
					</div>

					<!-- cURL Tab -->
					<div x-show="tab === 'curl'" x-cloak>
						<p class="text-xs text-[#666600] uppercase mb-2">&gt; SIGN DATA:</p>
						@docsCodeBlockMulti(curlSignExample())
						
						<p class="text-xs text-[#666600] uppercase mt-6 mb-2">&gt; GET KEY INFO:</p>
						@docsCodeBlock(`curl https://api.popsigner.com/v1/keys/{KEY_ID} \
  -H "Authorization: Bearer YOUR_API_KEY"`)
					</div>
				</section>

				<!-- REST API Reference -->
				<section class="mb-16">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; REST_API_REFERENCE_
					</h2>
					
					<div class="space-y-4">
						@docsAPIEndpoint("POST", "/v1/keys", "Create a new signing key")
						@docsAPIEndpoint("GET", "/v1/keys/:id", "Get key details and public key")
						@docsAPIEndpoint("POST", "/v1/keys/:id/sign", "Sign data with a key")
						@docsAPIEndpoint("GET", "/v1/keys/:id/export", "Export key (exit guarantee)")
						@docsAPIEndpoint("GET", "/v1/audit", "Get audit trail")
					</div>
				</section>

				</div><!-- End BUILD TAB -->

				<!-- OPERATE TAB CONTENT -->
				<div x-show="mainTab === 'operate'" x-cloak x-data="{ operateTab: 'opstack' }">
				
				<!-- Stack Selector Tabs -->
				<div class="mb-8 flex gap-2 p-1 bg-black border border-[#333300]">
					<button @click="operateTab = 'opstack'" 
							:style="operateTab === 'opstack' ? 'background-color: #FF0420; color: white;' : 'background-color: black; color: #888888;'"
							class="flex-1 px-6 py-3 text-sm font-bold uppercase transition-all flex items-center justify-center gap-2 hover:opacity-80">
						<span>ğŸ”´</span> OP STACK
					</button>
					<button @click="operateTab = 'arbitrum'" 
							:style="operateTab === 'arbitrum' ? 'background-color: #12AAFF; color: white;' : 'background-color: black; color: #888888;'"
							class="flex-1 px-6 py-3 text-sm font-bold uppercase transition-all flex items-center justify-center gap-2 hover:opacity-80">
						<span>ğŸ”µ</span> ARBITRUM ORBIT
					</button>
				</div>

				<!-- OP STACK CONTENT -->
				<div x-show="operateTab === 'opstack'" x-cloak>

				<!-- OP Stack Hero -->
				<section class="mb-12">
					<div class="p-6 bg-black border border-[#FF0420] relative overflow-hidden">
						<div class="absolute top-0 right-0 w-32 h-32 bg-[#FF0420]/10 blur-3xl"></div>
						<div class="relative">
							<div class="flex items-center gap-3 mb-4">
								<span class="text-3xl">ğŸ”´</span>
								<h2 class="text-2xl text-[#FF0420] font-bold uppercase tracking-wider">
									OP STACK REMOTE SIGNER
								</h2>
							</div>
							<p class="text-[#33FF00] opacity-80 uppercase text-sm max-w-2xl">
								Run OP-BATCHER and OP-PROPOSER with POPSigner as your remote signing backend.
								Just set two environment variables. No code changes. No private keys on your nodes.
							</p>
						</div>
					</div>
				</section>

				<!-- Why Remote Signing -->
				<section class="mb-12">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; WHY_REMOTE_SIGNING_
					</h2>
					<div class="grid md:grid-cols-2 gap-4">
						<div class="p-4 bg-black border border-[#333300]">
							<div class="flex items-center gap-2 mb-2">
								<span class="text-[#FF3333]">âš ï¸</span>
								<span class="text-[#FF3333] font-bold uppercase">WITHOUT POPSIGNER</span>
							</div>
							<ul class="text-sm text-[#666600] space-y-2 uppercase">
								<li>â€¢ Private keys stored as env vars</li>
								<li>â€¢ Keys exposed if node compromised</li>
								<li>â€¢ No audit trail for signatures</li>
								<li>â€¢ Manual key rotation nightmare</li>
							</ul>
						</div>
						<div class="p-4 bg-black border border-[#33FF00]">
							<div class="flex items-center gap-2 mb-2">
								<span class="text-[#33FF00]">âœ“</span>
								<span class="text-[#33FF00] font-bold uppercase">WITH POPSIGNER</span>
							</div>
							<ul class="text-sm text-[#33FF00] space-y-2 uppercase">
								<li>â€¢ Keys never leave HSM/OpenBao</li>
								<li>â€¢ Node compromise = no key leak</li>
								<li>â€¢ Full audit log of all signatures</li>
								<li>â€¢ Managed key lifecycle</li>
							</ul>
						</div>
					</div>
				</section>

				<!-- Setup Steps -->
				<section class="mb-12">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; SETUP_STEPS_
					</h2>
					<div class="space-y-6">
						<!-- Step 1 -->
						<div class="p-5 bg-black border border-[#333300]">
							<div class="flex items-center gap-3 mb-4">
								<div class="w-10 h-10 border border-[#FF0420] flex items-center justify-center">
									<span class="text-[#FF0420] font-bold">01</span>
								</div>
								<h3 class="text-[#FFB000] font-bold uppercase">CREATE EVM KEY</h3>
							</div>
							<p class="text-sm text-[#33FF00] opacity-80 mb-4 uppercase">
								Create a key in POPSigner dashboard with "EVM" or "Universal" network type.
							</p>
							<div class="bg-[#050505] p-4 border border-[#1A1A00]">
								<p class="text-xs text-[#666600] mb-2">Dashboard â†’ Keys â†’ Create Key â†’ Select "âŸ  EVM"</p>
								<p class="text-sm text-[#33FF00]">Your Ethereum address: <span class="text-[#FFB000]">0x742d35Cc6634C0532925a3b844Bc454e4438f44e</span></p>
							</div>
						</div>

						<!-- Step 2 -->
						<div class="p-5 bg-black border border-[#333300]">
							<div class="flex items-center gap-3 mb-4">
								<div class="w-10 h-10 border border-[#FF0420] flex items-center justify-center">
									<span class="text-[#FF0420] font-bold">02</span>
								</div>
								<h3 class="text-[#FFB000] font-bold uppercase">FUND YOUR ADDRESS</h3>
							</div>
							<p class="text-sm text-[#33FF00] opacity-80 uppercase">
								Send ETH to your batcher/proposer address on L1 for gas fees.
							</p>
						</div>

						<!-- Step 3 -->
						<div class="p-5 bg-black border border-[#333300]">
							<div class="flex items-center gap-3 mb-4">
								<div class="w-10 h-10 border border-[#FF0420] flex items-center justify-center">
									<span class="text-[#FF0420] font-bold">03</span>
								</div>
								<h3 class="text-[#FFB000] font-bold uppercase">CONFIGURE OP-BATCHER</h3>
							</div>
							<p class="text-sm text-[#33FF00] opacity-80 mb-4 uppercase">
								Point op-batcher to POPSigner's JSON-RPC gateway.
							</p>
							@docsCodeBlockMulti(opBatcherExample())
						</div>

						<!-- Step 4 -->
						<div class="p-5 bg-black border border-[#333300]">
							<div class="flex items-center gap-3 mb-4">
								<div class="w-10 h-10 border border-[#FF0420] flex items-center justify-center">
									<span class="text-[#FF0420] font-bold">04</span>
								</div>
								<h3 class="text-[#FFB000] font-bold uppercase">CONFIGURE OP-PROPOSER</h3>
							</div>
							<p class="text-sm text-[#33FF00] opacity-80 mb-4 uppercase">
								Same pattern for op-proposer (use a different key for separation of concerns).
							</p>
							@docsCodeBlockMulti(opProposerExample())
						</div>
					</div>
				</section>

				<!-- JSON-RPC Methods -->
				<section class="mb-12">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; JSON-RPC_METHODS_
					</h2>
					<p class="text-sm text-[#33FF00] opacity-80 mb-4 uppercase">
						POPSigner's RPC Gateway implements these Ethereum signing methods:
					</p>
					<div class="space-y-3">
						@docsRPCMethod("eth_accounts", "Returns list of addresses owned by this signer")
						@docsRPCMethod("eth_signTransaction", "Signs and returns RLP-encoded transaction")
						@docsRPCMethod("eth_sign", "Signs arbitrary data with Ethereum prefix")
						@docsRPCMethod("personal_sign", "Signs with personal message prefix (EIP-191)")
					</div>
				</section>

				<!-- Architecture -->
				<section class="mb-12">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; ARCHITECTURE_
					</h2>
					<div class="bg-black border border-[#333300] p-6 font-mono text-sm">
						<pre class="text-[#33FF00] overflow-x-auto">{ architectureDiagram() }</pre>
					</div>
				</section>

				<!-- Environment Variables -->
				<section class="mb-12">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; ENVIRONMENT_VARIABLES_
					</h2>
					<div class="overflow-x-auto">
						<table class="w-full text-sm">
							<thead>
								<tr class="border-b border-[#333300]">
									<th class="text-left py-3 px-4 text-[#FFB000] uppercase">Variable</th>
									<th class="text-left py-3 px-4 text-[#FFB000] uppercase">Description</th>
								</tr>
							</thead>
							<tbody class="text-[#33FF00]">
								<tr class="border-b border-[#1A1A00]">
									<td class="py-3 px-4 font-mono text-[#FFB000]">OP_BATCHER_SIGNER_ENDPOINT</td>
									<td class="py-3 px-4 opacity-80">POPSigner RPC Gateway URL</td>
								</tr>
								<tr class="border-b border-[#1A1A00]">
									<td class="py-3 px-4 font-mono text-[#FFB000]">OP_BATCHER_SIGNER_ADDRESS</td>
									<td class="py-3 px-4 opacity-80">Your batcher's Ethereum address</td>
								</tr>
								<tr class="border-b border-[#1A1A00]">
									<td class="py-3 px-4 font-mono text-[#FFB000]">OP_PROPOSER_SIGNER_ENDPOINT</td>
									<td class="py-3 px-4 opacity-80">POPSigner RPC Gateway URL</td>
								</tr>
								<tr class="border-b border-[#1A1A00]">
									<td class="py-3 px-4 font-mono text-[#FFB000]">OP_PROPOSER_SIGNER_ADDRESS</td>
									<td class="py-3 px-4 opacity-80">Your proposer's Ethereum address</td>
								</tr>
							</tbody>
						</table>
					</div>
				</section>

				<!-- Supported Networks -->
				<section class="mb-12">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; SUPPORTED_NETWORKS_
					</h2>
					<div class="grid grid-cols-2 md:grid-cols-4 gap-3">
						@docsNetworkBadge("OP Mainnet", "10")
						@docsNetworkBadge("OP Sepolia", "11155420")
						@docsNetworkBadge("Base", "8453")
						@docsNetworkBadge("Base Sepolia", "84532")
						@docsNetworkBadge("Ethereum", "1")
						@docsNetworkBadge("Sepolia", "11155111")
						@docsNetworkBadge("Custom", "Any EIP-155")
					</div>
				</section>

				</div><!-- End OP STACK CONTENT -->

				<!-- ARBITRUM ORBIT CONTENT -->
				<div x-show="operateTab === 'arbitrum'" x-cloak>

				<!-- Arbitrum Orbit Hero -->
				<section class="mb-12">
					<div class="p-6 bg-black border border-[#12AAFF] relative overflow-hidden">
						<div class="absolute top-0 right-0 w-32 h-32 bg-[#12AAFF]/10 blur-3xl"></div>
						<div class="relative">
							<div class="flex items-center gap-3 mb-4">
								<span class="text-3xl">ğŸ”µ</span>
								<h2 class="text-2xl text-[#12AAFF] font-bold uppercase tracking-wider">
									ARBITRUM ORBIT REMOTE SIGNER
								</h2>
							</div>
							<p class="text-[#33FF00] opacity-80 uppercase text-sm max-w-2xl">
								Run Nitro batch-poster and staker with POPSigner using mTLS certificates.
								Generate certs in dashboard, add 3 flags to Nitro. That's it.
							</p>
						</div>
					</div>
				</section>

				<!-- Arbitrum Auth Difference -->
				<section class="mb-12">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; MTLS_VS_API_KEY_
					</h2>
					<div class="grid md:grid-cols-2 gap-4">
						<div class="p-4 bg-black border border-[#FF0420]">
							<div class="flex items-center gap-2 mb-2">
								<span class="text-[#FF0420]">ğŸ”´</span>
								<span class="text-[#FF0420] font-bold uppercase">OP STACK (API Key)</span>
							</div>
							<ul class="text-sm text-[#33FF00] space-y-2 uppercase">
								<li>â€¢ API key in X-API-Key header</li>
								<li>â€¢ Simpler setup</li>
								<li>â€¢ Port 8545</li>
							</ul>
						</div>
						<div class="p-4 bg-black border border-[#12AAFF]">
							<div class="flex items-center gap-2 mb-2">
								<span class="text-[#12AAFF]">ğŸ”µ</span>
								<span class="text-[#12AAFF] font-bold uppercase">ARBITRUM (mTLS)</span>
							</div>
							<ul class="text-sm text-[#33FF00] space-y-2 uppercase">
								<li>â€¢ Client certificate authentication</li>
								<li>â€¢ Native Nitro support</li>
								<li>â€¢ Port 8546</li>
							</ul>
						</div>
					</div>
				</section>

				<!-- Arbitrum Setup Steps -->
				<section class="mb-12">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; ARBITRUM_SETUP_
					</h2>
					<div class="space-y-6">
						<!-- Step 1 -->
						<div class="p-5 bg-black border border-[#333300]">
							<div class="flex items-center gap-3 mb-4">
								<div class="w-10 h-10 border border-[#12AAFF] flex items-center justify-center">
									<span class="text-[#12AAFF] font-bold">01</span>
								</div>
								<h3 class="text-[#FFB000] font-bold uppercase">CREATE EVM KEY</h3>
							</div>
							<p class="text-sm text-[#33FF00] opacity-80 mb-4 uppercase">
								Create a key in POPSigner dashboard with "EVM" network type.
							</p>
							<div class="bg-[#050505] p-4 border border-[#1A1A00]">
								<p class="text-xs text-[#666600] mb-2">Dashboard â†’ Keys â†’ Create Key â†’ Select "âŸ  EVM"</p>
								<p class="text-sm text-[#33FF00]">Your Ethereum address: <span class="text-[#12AAFF]">0x742d35Cc6634C0532925a3b844Bc454e4438f44e</span></p>
							</div>
						</div>

						<!-- Step 2 -->
						<div class="p-5 bg-black border border-[#333300]">
							<div class="flex items-center gap-3 mb-4">
								<div class="w-10 h-10 border border-[#12AAFF] flex items-center justify-center">
									<span class="text-[#12AAFF] font-bold">02</span>
								</div>
								<h3 class="text-[#FFB000] font-bold uppercase">GENERATE MTLS CERTIFICATE</h3>
							</div>
							<p class="text-sm text-[#33FF00] opacity-80 mb-4 uppercase">
								Generate a client certificate in the Certificates settings page.
							</p>
							<div class="bg-[#050505] p-4 border border-[#1A1A00] space-y-3">
								<p class="text-xs text-[#666600]">Dashboard â†’ Settings â†’ Certificates â†’ Generate Certificate</p>
								<div class="grid grid-cols-3 gap-3 pt-2">
									<div class="text-center">
										<span class="text-xl">ğŸ“œ</span>
										<p class="text-xs text-[#33FF00] mt-1">client.crt</p>
									</div>
									<div class="text-center">
										<span class="text-xl">ğŸ”‘</span>
										<p class="text-xs text-[#FFB000] mt-1">client.key</p>
									</div>
									<div class="text-center">
										<span class="text-xl">ğŸ›ï¸</span>
										<p class="text-xs text-[#33FF00] mt-1">popsigner-ca.crt</p>
									</div>
								</div>
								<p class="text-xs text-[#FF3333] pt-2">âš  Download immediately - private key shown only once!</p>
							</div>
						</div>

						<!-- Step 3 -->
						<div class="p-5 bg-black border border-[#333300]">
							<div class="flex items-center gap-3 mb-4">
								<div class="w-10 h-10 border border-[#12AAFF] flex items-center justify-center">
									<span class="text-[#12AAFF] font-bold">03</span>
								</div>
								<h3 class="text-[#FFB000] font-bold uppercase">CONFIGURE NITRO BATCH POSTER</h3>
							</div>
							<p class="text-sm text-[#33FF00] opacity-80 mb-4 uppercase">
								Point Nitro batch-poster to POPSigner with mTLS certificates.
							</p>
							@docsCodeBlockMulti(nitroBatchPosterExample())
						</div>

						<!-- Step 4 -->
						<div class="p-5 bg-black border border-[#333300]">
							<div class="flex items-center gap-3 mb-4">
								<div class="w-10 h-10 border border-[#12AAFF] flex items-center justify-center">
									<span class="text-[#12AAFF] font-bold">04</span>
								</div>
								<h3 class="text-[#FFB000] font-bold uppercase">CONFIGURE NITRO STAKER</h3>
							</div>
							<p class="text-sm text-[#33FF00] opacity-80 mb-4 uppercase">
								Same pattern for staker (use a different key for separation of concerns).
							</p>
							@docsCodeBlockMulti(nitroStakerExample())
						</div>
					</div>
				</section>

				<!-- Nitro Architecture -->
				<section class="mb-12">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; NITRO_ARCHITECTURE_
					</h2>
					<div class="bg-black border border-[#333300] p-6 font-mono text-sm">
						<pre class="text-[#33FF00] overflow-x-auto">{ nitroArchitectureDiagram() }</pre>
					</div>
				</section>

				<!-- Nitro Environment Variables -->
				<section class="mb-12">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; NITRO_FLAGS_
					</h2>
					<div class="overflow-x-auto">
						<table class="w-full text-sm">
							<thead>
								<tr class="border-b border-[#333300]">
									<th class="text-left py-3 px-4 text-[#FFB000] uppercase">Flag</th>
									<th class="text-left py-3 px-4 text-[#FFB000] uppercase">Description</th>
								</tr>
							</thead>
							<tbody class="text-[#33FF00]">
								<tr class="border-b border-[#1A1A00]">
									<td class="py-3 px-4 font-mono text-[#12AAFF]">--*.external-signer.url</td>
									<td class="py-3 px-4 opacity-80">POPSigner mTLS endpoint URL</td>
								</tr>
								<tr class="border-b border-[#1A1A00]">
									<td class="py-3 px-4 font-mono text-[#12AAFF]">--*.external-signer.address</td>
									<td class="py-3 px-4 opacity-80">Your Ethereum address (0x...)</td>
								</tr>
								<tr class="border-b border-[#1A1A00]">
									<td class="py-3 px-4 font-mono text-[#12AAFF]">--*.external-signer.method</td>
									<td class="py-3 px-4 opacity-80">eth_signTransaction</td>
								</tr>
								<tr class="border-b border-[#1A1A00]">
									<td class="py-3 px-4 font-mono text-[#12AAFF]">--*.external-signer.client-cert</td>
									<td class="py-3 px-4 opacity-80">Path to client.crt</td>
								</tr>
								<tr class="border-b border-[#1A1A00]">
									<td class="py-3 px-4 font-mono text-[#12AAFF]">--*.external-signer.client-private-key</td>
									<td class="py-3 px-4 opacity-80">Path to client.key</td>
								</tr>
								<tr class="border-b border-[#1A1A00]">
									<td class="py-3 px-4 font-mono text-[#12AAFF]">--*.external-signer.root-ca</td>
									<td class="py-3 px-4 opacity-80">Path to popsigner-ca.crt</td>
								</tr>
							</tbody>
						</table>
					</div>
					<p class="text-xs text-[#666600] mt-4 uppercase">
						* Replace with: node.batch-poster.data-poster | node.staker.data-poster | parent-chain.wallet
					</p>
				</section>

				<!-- Supported Orbit Chains -->
				<section class="mb-12">
					<h2 class="text-xl text-[#FFB000] font-bold uppercase tracking-wider mb-6
					           drop-shadow-[0_0_8px_#FFB000]">
						&gt; SUPPORTED_ORBIT_CHAINS_
					</h2>
					<div class="grid grid-cols-2 md:grid-cols-4 gap-3">
						@docsOrbitNetworkBadge("Arbitrum One", "42161")
						@docsOrbitNetworkBadge("Arbitrum Nova", "42170")
						@docsOrbitNetworkBadge("Arbitrum Sepolia", "421614")
						@docsOrbitNetworkBadge("Custom Orbit", "Any L3")
					</div>
				</section>

				</div><!-- End ARBITRUM ORBIT CONTENT -->

				</div><!-- End OPERATE TAB -->

				<!-- Footer -->
				<footer class="pt-8 border-t border-[#333300]">
					<div class="flex items-center justify-between text-sm">
						<p class="text-[#666600] uppercase">
							Need help? 
							<a href="https://github.com/Bidon15/popsigner/issues" target="_blank" 
							   class="text-[#FFB000] hover:drop-shadow-[0_0_5px_#FFB000] transition-all">
								Open an issue
							</a>
						</p>
						<a href="https://github.com/Bidon15/popsigner" target="_blank" 
						   class="text-[#33FF00] hover:drop-shadow-[0_0_5px_#33FF00] transition-all uppercase">
							â­ Star on GitHub
						</a>
					</div>
				</footer>
			</div>
		</div>
	}
}

templ docsStepCard(number, title, description string) {
	<div class="group p-5 bg-black border border-[#1A4D1A] hover:border-[#33FF00] transition-all">
		<div class="w-10 h-10 border border-[#33FF00] flex items-center justify-center mb-4
		            group-hover:shadow-[0_0_10px_#33FF00] transition-all">
			<span class="text-[#33FF00] font-bold group-hover:text-[#FFB000] transition-colors">{ number }</span>
		</div>
		<h3 class="text-sm text-[#FFB000] font-bold uppercase tracking-wide mb-1
		           group-hover:drop-shadow-[0_0_5px_#FFB000] transition-all">
			{ title }
		</h3>
		<p class="text-xs text-[#33FF00] opacity-70 uppercase">{ description }</p>
	</div>
}

templ docsCodeBlock(code string) {
	<div class="relative group">
		<div class="bg-black border border-[#333300] p-4 overflow-x-auto">
			<pre class="text-sm text-[#33FF00]"><code>{ code }</code></pre>
		</div>
		<button onclick="navigator.clipboard.writeText(this.previousElementSibling.querySelector('code').innerText); this.innerText='âœ“ COPIED'; setTimeout(() => this.innerText='[COPY]', 2000)"
				class="absolute top-2 right-2 text-xs text-[#666600] hover:text-[#FFB000] uppercase opacity-0 group-hover:opacity-100 transition-all">
			[COPY]
		</button>
	</div>
}

templ docsCodeBlockMulti(code string) {
	<div class="relative group">
		<div class="bg-black border border-[#333300] overflow-x-auto">
			<div class="flex items-center justify-between border-b border-[#333300] px-4 py-2 bg-[#050505]">
				<span class="text-xs text-[#666600] uppercase">CODE</span>
				<button onclick="navigator.clipboard.writeText(this.closest('.group').querySelector('code').innerText); this.innerText='âœ“ COPIED'; setTimeout(() => this.innerText='[COPY]', 2000)"
						class="text-xs text-[#666600] hover:text-[#FFB000] uppercase transition-all">
					[COPY]
				</button>
			</div>
			<div class="p-4">
				<pre class="text-sm text-[#33FF00] leading-relaxed"><code>{ code }</code></pre>
			</div>
		</div>
	</div>
}

templ docsAPIEndpoint(method, path, description string) {
	<div class="p-4 bg-black border border-[#333300] hover:border-[#FFB000] transition-all group">
		<div class="flex items-center gap-3 mb-2">
			if method == "POST" {
				<span class="px-2 py-1 text-xs font-bold bg-[#33FF00]/20 text-[#33FF00] uppercase">{ method }</span>
			} else {
				<span class="px-2 py-1 text-xs font-bold bg-[#FFB000]/20 text-[#FFB000] uppercase">{ method }</span>
			}
			<code class="text-sm text-[#FFB000] group-hover:drop-shadow-[0_0_5px_#FFB000] transition-all">{ path }</code>
		</div>
		<p class="text-sm text-[#33FF00] opacity-70 uppercase">{ description }</p>
	</div>
}

func goExample() string {
	return `package main

import (
    "context"
    "log"
    
    "github.com/Bidon15/popsigner/sdk-go"
    "github.com/celestiaorg/celestia-node/api/client"
    "github.com/celestiaorg/celestia-node/blob"
    "github.com/celestiaorg/celestia-app/v3/pkg/namespace"
)

func main() {
    // Create keyring (one line!)
    kr, err := popsigner.NewCelestiaKeyring(
        "your-api-key",
        "your-key-id",
    )
    if err != nil {
        log.Fatal(err)
    }

    // Configure Celestia client
    cfg := client.Config{
        ReadConfig: client.ReadConfig{
            BridgeDAAddr: "http://localhost:26658",
            DAAuthToken:  "your_token",
        },
        SubmitConfig: client.SubmitConfig{
            DefaultKeyName: kr.KeyName(),
            Network:        "mocha-4",
        },
    }

    // Create client - signing handled by POPSigner
    celestiaClient, _ := client.New(context.Background(), cfg, kr)

    // Submit blob
    ns := namespace.MustNewV0([]byte("my_rollup"))
    myBlob, _ := blob.NewBlob(0, ns, []byte("Hello!"), nil)
    height, _ := celestiaClient.Blob.Submit(
        context.Background(), 
        []*blob.Blob{myBlob}, 
        nil,
    )
    
    log.Printf("Submitted at height %d", height)
}`
}

func rustExample() string {
	return `use popsigner::celestia::{Client, Namespace, Blob, AppVersion, TxConfig};

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    // Create client with POPSigner backend
    let client = Client::builder()
        .rpc_url("ws://localhost:26658")
        .grpc_url("http://localhost:9090")
        .popsigner("your-api-key", "your-key-name")
        .build()
        .await?;

    println!("Address: {}", client.address()?);

    // Create namespace and blob
    let ns = Namespace::new_v0(b"my_namespace")?;
    let blob = Blob::new(
        ns,
        b"Hello from POPSigner!".to_vec(),
        Some(client.address()?),
        AppVersion::V5,
    )?;

    // Submit - signing handled securely by POPSigner
    let tx = client.blob().submit(&[blob], TxConfig::default()).await?;
    println!("Submitted at height: {}", tx.height);

    Ok(())
}`
}

func curlSignExample() string {
	return `curl -X POST https://api.popsigner.com/v1/keys/{KEY_ID}/sign \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{"data": "base64_encoded_data"}'`
}

// OP Stack helper functions

func opBatcherExample() string {
	return `# Option 1: Command line flags
op-batcher \
  --l1-eth-rpc="https://eth-mainnet.g.alchemy.com/v2/YOUR_KEY" \
  --l2-eth-rpc="http://localhost:8545" \
  --rollup-rpc="http://localhost:8547" \
  --signer.endpoint="https://rpc.popsigner.com" \
  --signer.address="0x742d35Cc6634C0532925a3b844Bc454e4438f44e"

# Option 2: Environment variables
export OP_BATCHER_SIGNER_ENDPOINT="https://rpc.popsigner.com"
export OP_BATCHER_SIGNER_ADDRESS="0x742d35Cc6634C0532925a3b844Bc454e4438f44e"

# Then run without the signer flags
op-batcher --l1-eth-rpc="..." --l2-eth-rpc="..." --rollup-rpc="..."`
}

func opProposerExample() string {
	return `# Option 1: Command line flags
op-proposer \
  --l1-eth-rpc="https://eth-mainnet.g.alchemy.com/v2/YOUR_KEY" \
  --rollup-rpc="http://localhost:8547" \
  --l2oo-address="0x..." \
  --signer.endpoint="https://rpc.popsigner.com" \
  --signer.address="0x9876543210abcdef..."

# Option 2: Environment variables
export OP_PROPOSER_SIGNER_ENDPOINT="https://rpc.popsigner.com"
export OP_PROPOSER_SIGNER_ADDRESS="0x9876543210abcdef..."

op-proposer --l1-eth-rpc="..." --rollup-rpc="..." --l2oo-address="..."`
}

func architectureDiagram() string {
	return `â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   op-batcher    â”‚     â”‚   op-proposer   â”‚
â”‚  (no priv key)  â”‚     â”‚  (no priv key)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â”‚  eth_signTransaction  â”‚
         â”‚                       â”‚
         â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         POPSigner RPC Gateway           â”‚
â”‚    https://rpc.popsigner.com        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ API Key Authentication               â”‚
â”‚  â€¢ Per-address Rate Limiting            â”‚
â”‚  â€¢ Request Logging & Audit              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           POPSigner Core                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Control Plane  â”‚  OpenBao + secp256k1  â”‚
â”‚  (PostgreSQL)   â”‚  (HSM-backed keys)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`
}

templ docsRPCMethod(method, description string) {
	<div class="p-4 bg-black border border-[#333300] hover:border-[#FF0420] transition-all group flex items-center justify-between">
		<div>
			<code class="text-[#FF0420] font-bold group-hover:drop-shadow-[0_0_5px_#FF0420] transition-all">{ method }</code>
			<p class="text-sm text-[#33FF00] opacity-70 uppercase mt-1">{ description }</p>
		</div>
		<span class="text-[#666600] text-xs uppercase">JSON-RPC 2.0</span>
	</div>
}

templ docsNetworkBadge(name, chainID string) {
	<div class="p-3 bg-black border border-[#333300] text-center">
		<p class="text-sm text-[#FFB000] font-bold uppercase">{ name }</p>
		<p class="text-xs text-[#666600] mt-1">Chain ID: { chainID }</p>
	</div>
}

templ docsOrbitNetworkBadge(name, chainID string) {
	<div class="p-3 bg-black border border-[#12AAFF]/50 text-center hover:border-[#12AAFF] transition-colors">
		<p class="text-sm text-[#12AAFF] font-bold uppercase">{ name }</p>
		<p class="text-xs text-[#666600] mt-1">Chain ID: { chainID }</p>
	</div>
}

// Nitro helper functions

func nitroBatchPosterExample() string {
	return `# Nitro batch poster with POPSigner mTLS
nitro \
  --node.batch-poster.enable=true \
  --node.batch-poster.data-poster.external-signer.url="https://rpc-mtls.popsigner.com" \
  --node.batch-poster.data-poster.external-signer.address="0x742d35Cc6634C0532925a3b844Bc454e4438f44e" \
  --node.batch-poster.data-poster.external-signer.method="eth_signTransaction" \
  --node.batch-poster.data-poster.external-signer.client-cert="/etc/nitro/certs/client.crt" \
  --node.batch-poster.data-poster.external-signer.client-private-key="/etc/nitro/certs/client.key" \
  --node.batch-poster.data-poster.external-signer.root-ca="/etc/nitro/certs/popsigner-ca.crt"`
}

func nitroStakerExample() string {
	return `# Nitro staker with POPSigner mTLS
nitro \
  --node.staker.enable=true \
  --node.staker.data-poster.external-signer.url="https://rpc-mtls.popsigner.com" \
  --node.staker.data-poster.external-signer.address="0x9876543210abcdef..." \
  --node.staker.data-poster.external-signer.method="eth_signTransaction" \
  --node.staker.data-poster.external-signer.client-cert="/etc/nitro/certs/client.crt" \
  --node.staker.data-poster.external-signer.client-private-key="/etc/nitro/certs/client.key" \
  --node.staker.data-poster.external-signer.root-ca="/etc/nitro/certs/popsigner-ca.crt"`
}

func nitroArchitectureDiagram() string {
	return `â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Nitro Batch    â”‚     â”‚  Nitro Staker   â”‚
â”‚    Poster       â”‚     â”‚                 â”‚
â”‚  (no priv key)  â”‚     â”‚  (no priv key)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â”‚  mTLS + eth_signTx    â”‚
         â”‚  (client.crt/key)     â”‚
         â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      POPSigner mTLS Gateway             â”‚
â”‚    https://rpc-mtls.popsigner.com   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ mTLS Client Cert Authentication      â”‚
â”‚  â€¢ Cert â†’ Organization mapping          â”‚
â”‚  â€¢ Per-address Rate Limiting            â”‚
â”‚  â€¢ Request Logging & Audit              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           POPSigner Core                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Control Plane  â”‚  OpenBao + secp256k1  â”‚
â”‚  (PostgreSQL)   â”‚  (HSM-backed keys)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`
}
